!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rematrix"),require("prop-types"),require("react")):"function"==typeof define&&define.amd?define(["exports","rematrix","prop-types","react"],e):e(t.ReactFlipToolkit={},t.Rematrix,t.PropTypes,t.React)}(this,function(t,e,n,i){n=n&&n.hasOwnProperty("default")?n.default:n;var r="default"in i?i.default:i,o=function(t){return"number"==typeof t},s=function(t){return"[object Object]"===Object.prototype.toString.call(t)},a=function(t){return Array.prototype.slice.apply(t)};function l(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return e.forEach(function(e){if(e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}),t}var p,u=function(t,e,n){return t+(e-t)*n},c={noWobble:{stiffness:200,damping:26},gentle:{stiffness:120,damping:14},veryGentle:{stiffness:130,damping:17},wobbly:{stiffness:180,damping:12},stiff:{stiffness:260,damping:26}},f=function(t){return s(t)?t:Object.keys(c).indexOf(t)>-1?c[t]:{}};"undefined"!=typeof window&&(p=window.requestAnimationFrame);var d=p=p||function(t){window.setTimeout(t,1e3/60)},h=Date.now(),g="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()-h};function m(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var v=function(){};v.prototype.run=function(){var t=this;d(function(){t.springSystem.loop(g())})};var y=function(){this.position=0,this.velocity=0},S=0,_=function(t){this._id="s"+S++,this._springSystem=t,this.listeners=[],this._startValue=0,this._currentState=new y,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new y,this._restSpeedThreshold=.001,this._tempState=new y,this._timeAccumulator=0,this._wasAtRest=!0,this._cachedSpringConfig={}};_.prototype.getId=function(){return this._id},_.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},_.prototype.setSpringConfig=function(t){return this._springConfig=t,this},_.prototype.getCurrentValue=function(){return this._currentState.position},_.prototype.getDisplacementDistanceForState=function(t){return Math.abs(this._endValue-t.position)},_.prototype.setEndValue=function(t){if(t===this._endValue)return this;if(this.prevEndValue=t,this._endValue===t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var e=0,n=this.listeners.length;e<n;e++){var i=this.listeners[e].onSpringEndStateChange;i&&i(this)}return this},_.prototype.setVelocity=function(t){return t===this._currentState.velocity?this:(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId()),this)},_.prototype.setCurrentValue=function(t){this._startValue=t,this._currentState.position=t;for(var e=0,n=this.listeners.length;e<n;e++){var i=this.listeners[e];i.onSpringUpdate&&i.onSpringUpdate(this)}return this},_.prototype.setAtRest=function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},_.prototype.setOvershootClampingEnabled=function(t){return this._overshootClampingEnabled=t,this},_.prototype.isOvershooting=function(){var t=this._startValue,e=this._endValue;return this._springConfig.tension>0&&(t<e&&this.getCurrentValue()>e||t>e&&this.getCurrentValue()<e)},_.prototype.advance=function(t,e){var n=this.isAtRest();if(!n||!this._wasAtRest){var i=e;e>.064&&(i=.064),this._timeAccumulator+=i;for(var r,o,s,a,l,p,u=this._springConfig.tension,c=this._springConfig.friction,f=this._currentState.position,d=this._currentState.velocity,h=this._tempState.position,g=this._tempState.velocity;this._timeAccumulator>=.001;)this._timeAccumulator-=.001,this._timeAccumulator<.001&&(this._previousState.position=f,this._previousState.velocity=d),o=u*(this._endValue-h)-c*d,a=u*(this._endValue-(h=f+.001*(r=d)*.5))-c*(g=d+.001*o*.5),p=u*(this._endValue-(h=f+.001*(s=g)*.5))-c*(g=d+.001*a*.5),h=f+.001*(l=g),f+=1/6*(r+2*(s+l)+(g=d+.001*p))*.001,d+=1/6*(o+2*(a+p)+(u*(this._endValue-h)-c*g))*.001;this._tempState.position=h,this._tempState.velocity=g,this._currentState.position=f,this._currentState.velocity=d,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/.001),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),n=!0);var m=!1;this._wasAtRest&&(this._wasAtRest=!1,m=!0);var v=!1;n&&(this._wasAtRest=!0,v=!0),this.notifyPositionUpdated(m,v)}},_.prototype.notifyPositionUpdated=function(t,e){var n=this;this.listeners.filter(Boolean).forEach(function(i){t&&i.onSpringActivate&&!n._onActivateCalled&&(i.onSpringActivate(n),n._onActivateCalled=!0),i.onSpringUpdate&&i.onSpringUpdate(n),e&&i.onSpringAtRest&&i.onSpringAtRest(n)})},_.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},_.prototype.wasAtRest=function(){return this._wasAtRest},_.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},_.prototype._interpolate=function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},_.prototype.addListener=function(t){return this.listeners.push(t),this},_.prototype.addOneTimeListener=function(t){var e=this;return Object.keys(t).forEach(function(n){var i;t[n]=(i=t[n],function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];i.apply(void 0,n),e.removeListener(t)})}),this.listeners.push(t),this},_.prototype.removeListener=function(t){return m(this.listeners,t),this};var E=function(t){this.looper=t||new v,this.looper.springSystem=this,this.listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={}};E.prototype.createSpring=function(t,e){return this.createSpringWithConfig({tension:t,friction:e})},E.prototype.createSpringWithConfig=function(t){var e=new _(this);return this.registerSpring(e),e.setSpringConfig(t),e},E.prototype.getIsIdle=function(){return this._isIdle},E.prototype.registerSpring=function(t){this._springRegistry[t.getId()]=t},E.prototype.deregisterSpring=function(t){m(this._activeSprings,t),delete this._springRegistry[t.getId()]},E.prototype.advance=function(t,e){for(var n=this;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(this._activeSprings.filter(Boolean).forEach(function(i){i.systemShouldAdvance()?i.advance(t/1e3,e/1e3):n._idleSpringIndices.push(n._activeSprings.indexOf(i))});this._idleSpringIndices.length>0;){var i=this._idleSpringIndices.pop();i>=0&&this._activeSprings.splice(i,1)}},E.prototype.loop=function(t){var e;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var n=t-this._lastTimeMillis;this._lastTimeMillis=t;var i=0,r=this.listeners.length;for(i=0;i<r;i++)(e=this.listeners[i]).onBeforeIntegrate&&e.onBeforeIntegrate(this);for(this.advance(t,n),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),i=0;i<r;i++)(e=this.listeners[i]).onAfterIntegrate&&e.onAfterIntegrate(this);this._isIdle||this.looper.run()},E.prototype.activateSpring=function(t){var e=this._springRegistry[t];-1===this._activeSprings.indexOf(e)&&this._activeSprings.push(e),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())};var C=new E,I=function(t){var e=t.springConfig,n=e.overshootClamping,i=t.getOnUpdateFunc,r=t.onAnimationEnd,o=t.isGestureControlled,s=t.onSpringActivate,a=C.createSpring(e.stiffness,e.damping);a.setOvershootClampingEnabled(!!n);var l={onSpringActivate:s,onSpringAtRest:o?function(){}:function(){a.destroy(),r()},onSpringUpdate:i({spring:a,onAnimationEnd:r})};return a.addListener(l),a},A=function(t){var e=I(t);return e.setEndValue(1),e},b=function(t,e,n){if(void 0===e&&(e={}),t&&t.length){e.reverse&&t.reverse();var i,r="number"!=typeof(i=e.speed)?1.1:1+Math.min(Math.max(5*i,0),5),o=1/Math.max(Math.min(t.length,100),10),s=t.map(function(t,e){var i=t.getOnUpdateFunc;return t.getOnUpdateFunc=function(t){var a=i(t);return function(t){var i=t.getCurrentValue();((i=i<.01?0:i>.99?1:i)>=o||n)&&s[e+1]&&s[e+1](Math.max(Math.min(i*r,1),0)),a(t)}},t}).map(function(t){var e=I(Object.assign({},t,{isGestureControlled:n}));if(e)return e.setEndValue.bind(e)}).filter(Boolean);s[0]&&!n&&s[0](1)}},x=function(t){return[0,1,4,5,12,13].map(function(e){return t[e]})},O=function(t){return t.top<window.innerHeight&&t.bottom>0&&t.left<window.innerWidth&&t.right>0},w=function(t,e){var n;return l(t,((n={})[e[0]]=e[1],n))},U=function(t,e){return a(e?document.querySelectorAll('[data-portal-key="'+e+'"]'):t.querySelectorAll("[data-flip-id]"))},V=function(t){return t.map(function(t){return[t,t.getBoundingClientRect()]})},P=new E,F=i.createContext({}),R=i.createContext("portal"),M=i.createContext({}),k=function(t){function n(){var e=this;t.apply(this,arguments),this.isGestureControlled=!1,this.isGestureInitiated=!1,this.inProgressAnimations={},this.flipCallbacks={},this.el=void 0,this.setIsGestureInitiated=function(){e.isGestureInitiated=!0}}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getSnapshotBeforeUpdate=function(t){return this.isGestureInitiated?(this.isGestureControlled=!0,this.isGestureInitiated=!1):this.isGestureControlled=!1,t.flipKey!==this.props.flipKey&&this.el?function(t){var e=t.element,n=t.flipCallbacks;void 0===n&&(n={});var i=t.inProgressAnimations;void 0===i&&(i={});var r=U(e,t.portalKey),o=a(e.querySelectorAll("[data-inverse-flip-id]")),s={},p=[],u={};r.filter(function(t){return n&&n[t.dataset.flipId]&&n[t.dataset.flipId].onExit}).forEach(function(t){var e=t.parentNode;if(t.closest){var n=t.closest("[data-exit-container]");n&&(e=n)}var i=p.findIndex(function(t){return t[0]===e});-1===i&&(p.push([e,e.getBoundingClientRect()]),i=p.length-1),s[t.dataset.flipId]=p[i][1],u[t.dataset.flipId]=e});var c=V(r),f=c.map(function(t){var e=t[0],i=t[1],r={};if(n&&n[e.dataset.flipId]&&n[e.dataset.flipId].onExit){var o=s[e.dataset.flipId];l(r,{element:e,parent:u[e.dataset.flipId],childPosition:{top:i.top-o.top,left:i.left-o.left,width:i.width,height:i.height}})}return[e.dataset.flipId,{rect:i,opacity:parseFloat(window.getComputedStyle(e).opacity||"1"),domDataForExitAnimations:r}]}).reduce(w,{});return function(t,e){Object.keys(t).forEach(function(e){t[e].spring&&t[e].spring.destroy(),delete t[e]}),e.forEach(function(t){t.style.transform="",t.style.opacity=""})}(i,r.concat(o)),{flippedElementPositions:f,cachedOrderedFlipIds:c.map(function(t){return t[0].dataset.flipId})}}({element:this.el,flipCallbacks:this.flipCallbacks,inProgressAnimations:this.inProgressAnimations,portalKey:this.props.portalKey}):null},n.prototype.componentDidUpdate=function(t,n,i){this.props.flipKey!==t.flipKey&&this.el&&function(t){var n=t.cachedOrderedFlipIds;void 0===n&&(n=[]);var i=t.inProgressAnimations;void 0===i&&(i={});var r=t.flippedElementPositionsBeforeUpdate;void 0===r&&(r={});var s=t.flipCallbacks;void 0===s&&(s={});var p=t.containerEl,d=t.applyTransformOrigin,h=t.spring,g=t.debug,m=t.portalKey,v=t.staggerConfig;void 0===v&&(v={});var y=t.decisionData;void 0===y&&(y={});var S=t.handleEnterUpdateDelete,_=t.isGestureControlled,E=t.onComplete,C=t.onStart,I=function(t){return V(U(t.element,t.portalKey)).map(function(t){var e=t[0],n=t[1],i=window.getComputedStyle(e);return[e.dataset.flipId,{element:e,rect:n,opacity:parseFloat(i.opacity),transform:i.transform}]}).reduce(w,{})}({element:p,portalKey:m}),P=function(t){var e=t.containerEl,n=t.portalKey;return n?function(t){return function(e){return a(document.querySelectorAll('[data-portal-key="'+t+'"]'+e))}}(n):e?function(t){var e=Math.random().toFixed(5);return t.dataset.flipperId=e,function(n){return a(t.querySelectorAll('[data-flipper-id="'+e+'"] '+n))}}(e):function(){return[]}}({containerEl:p,portalKey:m}),F=function(t){return function(e){return t('[data-flip-id="'+e+'"]')[0]}}(P),R=function(t){return r[t]&&I[t]},M=Object.keys(r).concat(Object.keys(I)).filter(function(t){return!R(t)}),k={flipCallbacks:s,getElement:F,flippedElementPositionsBeforeUpdate:r,flippedElementPositionsAfterUpdate:I,inProgressAnimations:i,decisionData:y},D=function(t){var e,n=t.unflippedIds,i=t.flipCallbacks,r=t.getElement,o=t.flippedElementPositionsBeforeUpdate,s=t.flippedElementPositionsAfterUpdate,a=t.inProgressAnimations,l=t.decisionData,p=n.filter(function(t){return s[t]}).filter(function(t){return i[t]&&i[t].onAppear}),u=n.filter(function(t){return o[t]&&i[t]&&i[t].onExit}),c=new Promise(function(t){e=t}),f=[],d=0,h=u.map(function(t,n){var r=o[t].domDataForExitAnimations,s=r.element,p=r.parent,u=r.childPosition,c=u.top,h=u.left,g=u.width,m=u.height;"static"===getComputedStyle(p).position&&(p.style.position="relative"),s.style.transform="matrix(1, 0, 0, 1, 0, 0)",s.style.position="absolute",s.style.top=c+"px",s.style.left=h+"px",s.style.height=m+"px",s.style.width=g+"px";var v=f.filter(function(t){return t[0]===p})[0];v||(v=[p,document.createDocumentFragment()],f.push(v)),v[1].appendChild(s),d+=1;var y=function(){try{p.removeChild(s)}catch(t){}finally{0==(d-=1)&&e()}};return a[t]={stop:y},function(){return i[t].onExit(s,n,y,l)}});return f.forEach(function(t){t[0].appendChild(t[1])}),h.length||e(),{hideEnteringElements:function(){p.forEach(function(t){var e=r(t);e&&(e.style.opacity="0")})},animateEnteringElements:function(){p.forEach(function(t,e){var n=r(t);n&&i[t].onAppear(n,e,l)})},animateExitingElements:function(){return h.forEach(function(t){return t()}),c}}}(l({},k,{unflippedIds:M})),j=D.hideEnteringElements,T=D.animateEnteringElements,G=D.animateExitingElements,K=l({},k,{containerEl:p,isGestureControlled:_,flippedIds:n.filter(R),applyTransformOrigin:d,spring:h,debug:g,staggerConfig:v,scopedSelector:P,onComplete:E});C&&C(p,y);var B=function(t){var n=K.flippedIds,i=K.flipCallbacks,r=K.inProgressAnimations,s=K.flippedElementPositionsBeforeUpdate,p=K.flippedElementPositionsAfterUpdate,d=K.applyTransformOrigin,h=K.spring,g=K.getElement,m=K.debug,v=K.staggerConfig;void 0===v&&(v={});var y=K.decisionData;void 0===y&&(y={});var S,_=K.onComplete,E=K.containerEl,C=K.isGestureControlled,I=new Promise(function(t){S=t});if(_&&I.then(function(){return _(E,y)}),!n.length)return function(){return S([]),I};var w,U=[],V=g(n[0]),P=V?V.ownerDocument.querySelector("body"):document.querySelector("body");w=n.reduce(function(t,e){return t[e]=(t[e]||0)+1,t},{}),Object.keys(w).filter(function(t){return w[t]>1});var F=n.map(function(t){var n=s[t].rect,g=p[t].rect,m=s[t].opacity,v=p[t].opacity,_=g.width<1||g.height<1,E=p[t].element;if(!O(n)&&!O(g))return!1;if(!E)return!1;var I=JSON.parse(E.dataset.flipConfig),A=function(t){void 0===t&&(t={});var e=t.flippedSpring;return l({},c.noWobble,f(t.flipperSpring),f(e))}({flipperSpring:h,flippedSpring:I.spring}),b=!0===I.stagger?"default":I.stagger,w={element:E,id:t,stagger:b,springConfig:A};if(i[t]&&i[t].shouldFlip&&!i[t].shouldFlip(y.previous,y.current))return!1;var V=Math.abs(n.left-g.left),R=Math.abs(n.top-g.top),M=V+R,k=Math.abs(n.width-g.width)+Math.abs(n.height-g.height),D=Math.abs(v-m);if(M<.5&&k<.5&&D<.01)return!1;var j=e.parse(p[t].transform),T={matrix:j},G={matrix:[]},K=[j];I.translate&&(K.push(e.translateX(n.left-g.left)),K.push(e.translateY(n.top-g.top))),I.scale&&(K.push(e.scaleX(Math.max(n.width,1)/Math.max(g.width,1))),K.push(e.scaleY(Math.max(n.height,1)/Math.max(g.height,1)))),I.opacity&&(G.opacity=m,T.opacity=v);var B=[];if(!i[t]||!i[t].shouldInvert||i[t].shouldInvert(y.previous,y.current)){var q=function(t,e){return a(t.querySelectorAll('[data-inverse-flip-id="'+e+'"]'))}(E,t);B=q.map(function(t){return[t,JSON.parse(t.dataset.flipConfig)]})}G.matrix=x(K.reduce(e.multiply)),T.matrix=x(T.matrix);var X,Y=function(t){var e=t.element,n=t.invertedChildren,i=t.body;return function(t){var r=t.matrix,s=t.opacity,a=t.forceMinVals;if(o(s)&&(e.style.opacity=s+""),a&&(e.style.minHeight="1px",e.style.minWidth="1px"),r){var l=function(t){return"matrix("+t.join(", ")+")"}(r);e.style.transform=l,n&&function(t){var e=t.matrix,n=t.body;t.invertedChildren.forEach(function(t){var i=t[0],r=t[1];if(n.contains(i)){var o=e[0],s=e[3],a=e[5],l={translateX:0,translateY:0,scaleX:1,scaleY:1},p="";r.translate&&(l.translateX=-e[4]/o,l.translateY=-a/s,p+="translate("+l.translateX+"px, "+l.translateY+"px)"),r.scale&&(l.scaleX=1/o,l.scaleY=1/s,p+=" scale("+l.scaleX+", "+l.scaleY+")"),i.style.transform=p}})}({invertedChildren:n,matrix:r,body:i})}}}({element:E,invertedChildren:B,body:P});if(i[t]&&i[t].onComplete){var H=i[t].onComplete;X=function(){return H(E,y)}}var W=o(G.opacity)&&o(T.opacity)&&G.opacity!==T.opacity,N=!1;return l({},w,{stagger:b,springConfig:A,getOnUpdateFunc:function(e){return r[t]={spring:e.spring,onAnimationEnd:e.onAnimationEnd,difference:{translateXDifference:V,translateYDifference:R,prevRect:n,currentRect:g}},function(e){i[t]&&i[t].onSpringUpdate&&i[t].onSpringUpdate(e.getCurrentValue()),N||(N=!0,i[t]&&i[t].onStart&&i[t].onStart(E,y));var n=e.getCurrentValue();if(P.contains(E)){var r={matrix:[]};r.matrix=G.matrix.map(function(t,e){return u(t,T.matrix[e],n)}),W&&(r.opacity=u(G.opacity,T.opacity,n)),Y(r)}else e.destroy()}},initializeFlip:function(){Y({matrix:G.matrix,opacity:W?G.opacity:void 0,forceMinVals:_}),i[t]&&i[t].onStartImmediate&&i[t].onStartImmediate(E,y),I.transformOrigin?E.style.transformOrigin=I.transformOrigin:d&&(E.style.transformOrigin="0 0"),B.forEach(function(t){var e=t[0],n=t[1];n.transformOrigin?e.style.transformOrigin=n.transformOrigin:d&&(e.style.transformOrigin="0 0")})},onAnimationEnd:function(){delete r[t],"function"==typeof X&&X(),E.style.transform="",B.forEach(function(t){t[0].style.transform=""}),_&&E&&(E.style.minHeight="",E.style.minWidth=""),U.push(t),U.length>=F.length&&S(U)},isGestureControlled:C,delayUntil:I.delayUntil})}).filter(Boolean);if(F.forEach(function(t){return(0,t.initializeFlip)()}),m)return function(){};var R=F.filter(function(t){return t.delayUntil&&(e=t.delayUntil,F.filter(function(t){return t.id===e}).length);var e}),M={},k={},D={};R.forEach(function(t){t.stagger?(D[t.stagger]=!0,k[t.delayUntil]?k[t.delayUntil].push(t.stagger):k[t.delayUntil]=[t.stagger]):M[t.delayUntil]?M[t.delayUntil].push(t):M[t.delayUntil]=[t]});var j=F.filter(function(t){return t.stagger}).reduce(function(t,e){return t[e.stagger]?t[e.stagger].push(e):t[e.stagger]=[e],t},{}),T=F.filter(function(t){return-1===R.indexOf(t)});return T.forEach(function(t){t.onSpringActivate=function(){M[t.id]&&M[t.id].forEach(A),k[t.id]&&Object.keys(k[t.id].reduce(function(t,e){var n;return l(t,((n={})[e]=!0,n))},{})).forEach(function(t){b(j[t],v[t],C)})}}),function(){return F.length||S([]),T.filter(function(t){return!t.stagger}).forEach(A),Object.keys(j).forEach(function(t){D[t]||b(j[t],v[t],C)}),I}}();S?S({hideEnteringElements:j,animateEnteringElements:T,animateExitingElements:G,animateFlippedElements:B}):(j(),G().then(T),B())}({flippedElementPositionsBeforeUpdate:i.flippedElementPositions,cachedOrderedFlipIds:i.cachedOrderedFlipIds,isGestureControlled:this.isGestureControlled,containerEl:this.el,inProgressAnimations:this.inProgressAnimations,flipCallbacks:this.flipCallbacks,applyTransformOrigin:this.props.applyTransformOrigin,spring:this.props.spring,debug:this.props.debug,portalKey:this.props.portalKey,staggerConfig:this.props.staggerConfig,handleEnterUpdateDelete:this.props.handleEnterUpdateDelete,decisionData:{previous:t.decisionData,current:this.props.decisionData},onComplete:this.props.onComplete,onStart:this.props.onStart})},n.prototype.render=function(){var t=this,e=this.props,n=e.portalKey,i=r.createElement(M.Provider,{value:{inProgressAnimations:this.inProgressAnimations,setIsGestureInitiated:this.setIsGestureInitiated}},r.createElement(F.Provider,{value:this.flipCallbacks},r.createElement(e.element,{className:e.className,ref:function(e){return t.el=e}},this.props.children)));return n&&(i=r.createElement(R.Provider,{value:n},i)),i},n}(i.Component);function D(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&-1===e.indexOf(i)&&(n[i]=t[i]);return n}k.defaultProps={applyTransformOrigin:!0,element:"div"};var j=function(t){var e=t.children,n=t.flipId,r=t.inverseFlipId,o=t.portalKey,s=t.gestureHandlers,a=D(t,["children","flipId","inverseFlipId","portalKey","gestureHandlers"]),p=e,u=function(t){return"function"==typeof t}(p);if(!u)try{p=i.Children.only(e)}catch(t){throw new Error("Each Flipped component must wrap a single child")}a.scale||a.translate||a.opacity||l(a,{translate:!0,scale:!0,opacity:!0});var c={};return c["data-flip-config"]=JSON.stringify(a),n?c["data-flip-id"]=String(n):r&&(c["data-inverse-flip-id"]=String(r)),o&&(c["data-portal-key"]=o),u?p(c):(s&&l(c,s),i.cloneElement(p,c))},T=function(t){var e=t.children,n=t.flipId,i=t.shouldFlip,o=t.shouldInvert,a=t.onAppear,l=t.onStart,p=t.onStartImmediate,u=t.onComplete,c=t.onExit,f=t.onSpringUpdate,d=t.gestureHandlers,h=D(t,["children","flipId","shouldFlip","shouldInvert","onAppear","onStart","onStartImmediate","onComplete","onExit","onSpringUpdate","gestureHandlers"]);return e?h.inverseFlipId?r.createElement(j,Object.assign({},h),e):r.createElement(R.Consumer,null,function(t){return r.createElement(F.Consumer,null,function(g){return s(g)&&n&&(g[n]={shouldFlip:i,shouldInvert:o,onAppear:a,onStart:l,onStartImmediate:p,onComplete:u,onExit:c,onSpringUpdate:f}),r.createElement(j,Object.assign({flipId:n},h,{portalKey:t,gestureHandlers:d}),e)})}):null};T.displayName="Flipped",t.Flipper=k,t.Flipped=T,t.ExitContainer=function(t){var e;return i.cloneElement(t.children,((e={})["data-exit-container"]=!0,e))},t.spring=function(t){var e=t.values,n=t.onUpdate,i=t.delay;void 0===i&&(i=0);var r=t.onComplete,o=l({},c.noWobble,f(t.config)),s=o.overshootClamping,a=P.createSpring(o.stiffness,o.damping);return a.setOvershootClampingEnabled(!!s),a.addListener({onSpringAtRest:function(t){r&&r(),t.destroy()},onSpringUpdate:function(t){var i=t.getCurrentValue();if(!e)return n(i);var r=Object.keys(e).map(function(t){return[t,u(e[t][0],e[t][1],i)]}).reduce(function(t,e){var n;return Object.assign(t,((n={})[e[0]]=e[1],n))},{});n(r)}}),i?setTimeout(function(){a.setEndValue(1)},i):a.setEndValue(1),a}});
//# sourceMappingURL=index.umd.js.map

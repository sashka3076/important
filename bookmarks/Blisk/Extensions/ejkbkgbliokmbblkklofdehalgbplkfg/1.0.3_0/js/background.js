var api={stop:!1,init:function(){api.setDefaultSettings(),api.listenMessages()},setDefaultSettings:function(){var a={pngjpg:"png",delay:0,rnd:Math.random(),options:Date.now().toString(),speed:400,shortcut_full:90,shortcut_visible:88,shortcut_region:82,enableshortcuts:"yes",button_size:14,sb_opacity:0.7,created:new Date,color:"#FF0000"};for(var b in a)a.hasOwnProperty(b)&&!localStorage.hasOwnProperty(b)&&(localStorage[b]=a[b]);chrome.i18n.getAcceptLanguages(function(){try{localStorage.primaryLanguage=arguments[0][0]}catch(a){localStorage.primaryLanguage=""}})},callPopup:function(a){for(var b=chrome.extension.getViews({type:"popup"}),c=0;c<b.length;c++)b[c].popup.exec(a)},listenMessages:function(){chrome.runtime.onMessage.addListener(function(a){switch(api.stop=!1,a.data){case"captureVisible":screenshot.captureVisible();break;case"captureAll":screenshot.captureAll(a);break;case"stopNow":api.stop=!0;break;default:console.warn("Invalid message",a);}return!0})}};api.init();